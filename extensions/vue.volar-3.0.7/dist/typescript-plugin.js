"use strict";const e=require(`./path-browserify-RqgFuIaq.js`),t=require(`./language-core-D68PmcAp.js`);var n=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.makeGetExternalFiles=exports.decoratedLanguageServiceHosts=exports.decoratedLanguageServices=exports.projectExternalFileExtensions=exports.externalFiles=void 0,exports.makeGetScriptInfoWithLargeFileFailsafe=a,exports.createLanguageCommon=o,exports.isHasAlreadyDecoratedLanguageService=l;let n=t.require_language_core$1(),r=t.require_common(),i=t.require_decorateLanguageServiceHost();exports.externalFiles=new WeakMap,exports.projectExternalFileExtensions=new WeakMap,exports.decoratedLanguageServices=new WeakSet,exports.decoratedLanguageServiceHosts=new WeakSet;function a(e){return t=>{try{return e.project.getScriptInfo(t)}catch{}}}function o(e,t,o,s){let c=o.languageServiceHost.getScriptSnapshot.bind(o.languageServiceHost),l=a(o),u=(0,n.createLanguage)([...e.languagePlugins,{getLanguageId:r.resolveFileLanguageId}],new n.FileMap(t.sys.useCaseSensitiveFileNames),(e,t,n)=>{let r;n?r=c(e):(r=l(e)?.getSnapshot(),r||(o.project.getScriptVersion(e),r=l(e)?.getSnapshot())),r?u.scripts.set(e,r):u.scripts.delete(e)},e=>{o.session.change({file:e,line:1,offset:1,endLine:1,endOffset:1,insertString:``})});s(u),(0,i.decorateLanguageServiceHost)(t,u,o.languageServiceHost),e.setup?.(u)}let s=t=>(n,r=0)=>{if(r>=1||!exports.externalFiles.has(n)){let r=exports.externalFiles.get(n),a=exports.projectExternalFileExtensions.get(n),o=a?.length?(0,i.searchExternalFiles)(t,n,a):[];exports.externalFiles.set(n,o),r&&!c(r,o)&&n.refreshDiagnostics()}return exports.externalFiles.get(n)};exports.makeGetExternalFiles=s;function c(e,t){if(e.length!==t.length)return!1;let n=new Set(e);for(let e of t)if(!n.has(e))return!1;return!0}function l(t){return exports.decoratedLanguageServices.has(t.languageService)||exports.decoratedLanguageServiceHosts.has(t.languageServiceHost)?!0:(exports.decoratedLanguageServices.add(t.languageService),exports.decoratedLanguageServiceHosts.add(t.languageServiceHost),!1)}}),r=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createLanguageServicePlugin=a;let r=t.require_proxyLanguageService(),i=n();function a(e){return t=>{let{typescript:n}=t,a={create(t){if(!(0,i.isHasAlreadyDecoratedLanguageService)(t)){let a=e(n,t),o=a.languagePlugins.map(e=>e.typescript?.extraFileExtensions.map(e=>`.`+e.extension)??[]).flat();i.projectExternalFileExtensions.set(t.project,o);let{proxy:s,initialize:c}=(0,r.createProxyLanguageService)(t.languageService);t.languageService=s,(0,i.createLanguageCommon)(a,n,t,c)}return t.languageService},getExternalFiles:(0,i.makeGetExternalFiles)(n)};return a}}}),i=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createVueLanguageServiceProxy=a;let n=t.require_language_core(),r=t.require_shared(),i=/\\/g;function a(e,t,n,r,i){let a=new Map,u=(a,u)=>{switch(u){case`getCompletionsAtPosition`:return o(e,t,i,r,a[u]);case`getCompletionEntryDetails`:return s(t,a[u]);case`getCodeFixesAtPosition`:return c(a[u]);case`getDefinitionAndBoundSpan`:return l(e,t,i,n,r,a[u])}};return new Proxy(n,{get(e,t,n){a.has(t)||a.set(t,u(e,t));let r=a.get(t);return r||Reflect.get(e,t,n)},set(e,t,n,r){return Reflect.set(e,t,n,r)}})}function o(e,t,a,o,s){return(c,l,u,d)=>{let f=c.replace(i,`/`),p=s(f,l,u,d);if(p){p.entries=p.entries.filter(e=>!e.name.includes(`__VLS_`)&&!e.labelDetails?.description?.includes(`__VLS_`));let i=t.scripts.get(a(f)),s=i?.generated?.root;if(s instanceof n.VueVirtualCode){let t=[s.sfc.template,...s.sfc.styles],n=t.filter(Boolean).map(e=>[e.startTagEnd,e.endTagStart]);if(n.some(([e,t])=>l>=e&&l<=t)){let t=new Set([`var`,`function`,`module`]),n=e.Completions.SortText.GlobalsOrKeywords,i=new Set([n,`z`+n,n+`1`]);p.entries=p.entries.filter(e=>!(e.kind===`const`&&e.name in o.macros)&&(!t.has(e.kind)||!i.has(e.sortText)||(0,r.isGloballyAllowed)(e.name)))}}for(let e of p.entries)if(e.source){let t=e.name;for(let n of o.extensions){let i=(0,r.capitalize)(n.slice(1));if(e.source.endsWith(n)&&e.name.endsWith(i)){e.name=(0,r.capitalize)(e.name.slice(0,-i.length)),e.insertText&&=e.insertText.replace(`${i}$1`,`$1`),e.data&&(e.data.__isComponentAutoImport={ext:n,suffix:i,originalName:t,newName:e.insertText});break}}e.data&&(e.data.__isAutoImport={fileName:f})}}return p}}function s(e,t){return(...r)=>{let i=t(...r);if(r[6]?.__isComponentAutoImport){let{originalName:e,newName:t}=r[6].__isComponentAutoImport;for(let n of i?.codeActions??[])for(let r of n.changes)for(let n of r.textChanges)n.newText=n.newText.replace(`import `+e+` from `,`import `+t+` from `)}if(r[6]?.__isAutoImport){let{fileName:t}=r[6].__isAutoImport,a=e.scripts.get(t);if(a?.generated?.root instanceof n.VueVirtualCode){let e=a.generated.root.vueSfc;if(!e?.descriptor.script&&!e?.descriptor.scriptSetup)for(let e of i?.codeActions??[]){for(let t of e.changes){for(let e of t.textChanges){e.newText=`<script setup lang="ts">${e.newText}</script>\n\n`;break}break}break}}}return i}}function c(e){return(...t)=>{let n=e(...t);return n=n.filter(e=>!e.description.includes(`__VLS_`)),n}}function l(e,t,r,i,a,o){return(s,c)=>{let l=o(s,c);if(!l?.definitions?.length)return l;let u=i.getProgram(),d=t.scripts.get(r(s));if(!d?.generated)return l;let f=d.generated.root;if(!(f instanceof n.VueVirtualCode)||!f.sfc.template||c<f.sfc.template.startTagEnd||c>f.sfc.template.endTagStart)return l;let p=new Set(l.definitions),m=[];if(l.definitions.length>=2)for(let e of l.definitions)(f.sfc.content[e.textSpan.start-1]===`@`||f.sfc.content.slice(e.textSpan.start-5,e.textSpan.start)===`v-on:`)&&m.push(e);for(let e of l.definitions){if(a.extensions.some(t=>e.fileName.endsWith(t)))continue;let t=u.getSourceFile(e.fileName);if(!t)continue;h(t,e,t)}for(let e of m)p.delete(e);return{definitions:[...p],textSpan:l.textSpan};function h(t,n,r){e.isPropertySignature(t)&&t.type||e.isVariableDeclaration(t)&&e.isIdentifier(t.name)&&t.type&&!t.initializer?g(t.name,t.type,n,r):e.forEachChild(t,e=>h(e,n,r))}function g(t,n,r,i){let{textSpan:a,fileName:s}=r,c=t.getStart(i),l=t.getEnd();if(c!==a.start||l-c!==a.length||!e.isIndexedAccessTypeNode(n))return;let u=n.indexType.getStart(i),d=o(s,u);if(d?.definitions?.length){for(let e of d.definitions)p.add(e);m.push(r)}}}}}),a=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.collectExtractProps=r;let n=t.require_language_core();function r(e,t,r,i,a,o,s=0){let c=new Map,l=r.getSourceFile(a.fileName),u=r.getTypeChecker(),d=i.generated.languagePlugin.typescript?.getServiceScript(a),f=d?[...t.maps.forEach(d.code)].map(([,e])=>e):[],{sfc:p}=a;return l.forEachChild(function t(r){if(e.isPropertyAccessExpression(r)&&e.isIdentifier(r.expression)&&r.expression.text===`__VLS_ctx`&&e.isIdentifier(r.name)){let{name:t}=r;for(let i of f){let a=!1;for(let l of i.toSourceLocation(t.getEnd()-s))if(l[0]>=p.template.startTagEnd+o[0]&&l[0]<=p.template.startTagEnd+o[1]&&(0,n.isSemanticTokensEnabled)(l[1].data)){if(a=!0,!c.has(t.text)){let n=u.getTypeAtLocation(r),i=u.typeToString(n,r,e.TypeFormatFlags.NoTruncation);c.set(t.text,{name:t.text,type:i.includes(`__VLS_`)?`any`:i,model:!1})}let n=e.isPostfixUnaryExpression(r.parent)||e.isBinaryExpression(r.parent);n&&(c.get(t.text).model=!0);break}if(a)break}}r.forEachChild(t)}),[...c.values()]}}),o=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getComponentType=a,exports.getSelfComponentName=o,exports.getVariableType=s;let r=t.require_shared(),i=e.require_path_browserify();function a(e,t,n,i,a){let c=t.getTypeChecker(),l=a.split(`.`),u=i.type.getProperty(l[0])??i.type.getProperty((0,r.camelize)(l[0]))??i.type.getProperty((0,r.capitalize)((0,r.camelize)(l[0]))),d;if(u){d=c.getTypeOfSymbolAtLocation(u,i.node);for(let e=1;e<l.length;e++)u=d.getProperty(l[e]),u&&(d=c.getTypeOfSymbolAtLocation(u,i.node))}else{let i=o(n);i===(0,r.capitalize)((0,r.camelize)(a))&&(d=s(e,t,n,`__VLS_self`)?.type)}return d}function o(e){let t=i.basename(e);return(0,r.capitalize)((0,r.camelize)(t.slice(0,t.lastIndexOf(`.`))))}function s(e,t,n,r){let i=t.getSourceFile(n);if(i){let n=t.getTypeChecker(),a=c(e,i,r);if(a)return{node:a,type:n.getTypeAtLocation(a)}}}function c(e,t,n){let r;return i(t),r;function i(t){r||(e.isVariableDeclaration(t)&&t.name.getText()===n?r=t:t.forEachChild(i))}}}),s=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getComponentDirectives=r;let t=o(),n=new Set([`vBind`,`vIf`,`vOn`,`vOnce`,`vShow`,`vSlot`]);function r(e,r,i){let a=(0,t.getVariableType)(e,r,i,`__VLS_directives`);return a?a.type.getProperties().map(({name:e})=>e).filter(e=>e.startsWith(`v`)&&e.length>=2&&e[1]===e[1].toUpperCase()).filter(e=>!n.has(e)):[]}}),c=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getComponentEvents=n;let t=o();function n(e,n,r,i){let a=n.getTypeChecker(),o=(0,t.getVariableType)(e,n,r,`__VLS_components`);if(!o)return[];let s=(0,t.getComponentType)(e,n,r,o,i);if(!s)return[];let c=new Set;for(let e of s.getConstructSignatures()){let t=e.getReturnType(),n=t.getProperty(`$emit`);if(n){let e=a.getTypeOfSymbolAtLocation(n,o.node);for(let t of e.getCallSignatures())if(t.parameters.length){let e=t.parameters[0],n=a.getTypeOfSymbolAtLocation(e,o.node);n.isStringLiteral()&&c.add(n.value)}}}return[...c]}}),l=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getComponentNames=n;let t=o();function n(e,n,r){let i=(0,t.getVariableType)(e,n,r,`__VLS_components`)?.type.getProperties().map(e=>e.name).filter(e=>!e.includes(`$`)&&!e.startsWith(`_`))??[];return i.push((0,t.getSelfComponentName)(r)),i}}),u=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getComponentProps=n;let t=o();function n(e,n,i,a){let o=(0,t.getVariableType)(e,n,i,`__VLS_components`);if(!o)return[];let s=(0,t.getComponentType)(e,n,i,o,a);if(!s)return[];let c=new Map,l=n.getTypeChecker();for(let e of s.getCallSignatures())if(e.parameters.length){let t=e.parameters[0],n=l.getTypeOfSymbolAtLocation(t,o.node),r=n.getProperties();for(let e of r)u(e)}for(let e of s.getConstructSignatures()){let t=e.getReturnType(),n=t.getProperty(`$props`);if(n){let e=l.getTypeOfSymbolAtLocation(n,o.node),t=e.getProperties();for(let e of t)u(e)}}return[...c.values()];function u(t){if(t.flags&e.SymbolFlags.Method)return;let n=t.name,i=!(t.flags&e.SymbolFlags.Optional)||void 0,{documentation:a,deprecated:o}=r(t.getDocumentationComment(l),t.getJsDocTags()),s=[],u=l.getTypeOfSymbol(t),d=u.types;if(d)for(let e of d){let t=e.value;t&&s.push(t)}let f;for(let{parent:n}of l.getRootSymbols(t).flatMap(e=>e.declarations??[])){if(!e.isInterfaceDeclaration(n))continue;let{text:t}=n.name;if(t.endsWith(`HTMLAttributes`)||t===`AriaAttributes`||t===`SVGAttributes`){f=!0;break}}c.set(n,{name:n,required:i,deprecated:o,isAttribute:f,documentation:a,values:s})}}function r(e,t){let n=i(e),r=a(t),o=[n,r].filter(e=>!!e).join(`

`),s=t.some(e=>e.name===`deprecated`);return{documentation:o,deprecated:s}}function i(e){return e.map(e=>{switch(e.kind){case`keyword`:return`\`${e.text}\``;case`functionName`:return`**${e.text}**`;default:return e.text}}).join(``)}function a(e){return e.map(e=>{let t=`*@${e.name}*`,n=e.text?.map(e=>e.kind===`parameterName`?`\`${e.text}\``:e.text).join(``)||``;return`${t} ${n}`}).join(`

`)}}),d=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getComponentSlots=i;let n=t.require_language_core(),r=o();function i(e,t,i){let a=n.tsCodegen.get(i.sfc);if(!a)return[];let o=a.getSetupSlotsAssignName()??`__VLS_slots`,s=(0,r.getVariableType)(e,t,i.fileName,o);return s?s.type.getProperties().map(({name:e})=>e):[]}}),f=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getElementAttrs=n;let t=o();function n(e,n,r,i){let a=n.getTypeChecker(),o=(0,t.getVariableType)(e,n,r,`__VLS_elements`);if(!o)return[];let s=o.type.getProperty(i);if(!s)return[];let c=a.getTypeOfSymbol(s).getProperties();return c.map(e=>e.name)}}),p=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getElementNames=n;let t=o();function n(e,n,r){return(0,t.getVariableType)(e,n,r,`__VLS_elements`)?.type.getProperties().map(e=>e.name)??[]}}),m=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getImportPathForFile=t;function t(e,t,n,r,i,a){let o=n.getSourceFile(i),s=n.getSourceFile(r);if(!s||!o)return;let c=e.moduleSpecifiers.getModuleSpecifiersWithCacheInfo,l=e.createModuleSpecifierResolutionHost(n,t),{moduleSpecifiers:u}=c(o.symbol,n.getTypeChecker(),t.getCompilationSettings(),s,l,a);return u[0]}}),h=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.getReactiveReferences=i;let n=t.require_language_core(),r=new WeakMap;function i(e,t,i,o,s,c,l=0){let u=o?.generated?.languagePlugin.typescript?.getServiceScript(o.generated.root),d=u?t.maps.get(u.code,o):void 0,f=d?(e,t)=>{for(let[n,r]of d.toSourceRange(e-l,t-l,!1))return{start:n,end:r}}:(e,t)=>({start:e,end:t}),p=i.getProgram().getSourceFile(s);r.has(p)||r.set(p,a(e,p,f));let{signals:m,allValuePropertyAccess:h,allPropertyAccess:g,allFunctionCalls:_}=r.get(p),v=E(c)??D(c);if(!v)return;let y=v.binding?w(v.binding.ast,v.binding.accessTypes):[],b=C(v);if(!v.isDependent&&!y.length||!v.isDependency&&!b.length)return;let x=[],S=[];for(let t of b){let{ast:n}=t;if(e.isBlock(n)&&n.statements.length){let e=f(n.statements[0].getStart(p),n.statements[n.statements.length-1].end);e&&x.push({start:e.start,end:e.end})}else x.push({start:t.start,end:t.end})}for(let{callback:t}of y){if(!t)continue;if(e.isBlock(t.ast)&&t.ast.statements.length){let{statements:e}=t.ast,n=f(e[0].getStart(p),e[e.length-1].end);n&&x.push({start:n.start,end:n.end})}else S.push({start:t.start,end:t.end})}return{dependencyRanges:x,dependentRanges:S};function C(t,n=new Set){if(n.has(t))return[];n.add(t);let r=[],a=t.isDependency;if(t.accessor){let{requiredAccess:e}=t.accessor;o(t.accessor,e),t.accessor.ast.forEachChild(t=>{let n=f(t.getStart(p),t.end);n&&o({...n,ast:t},e)})}if(!a)return[];return r;function o(t,s,c=!1){if(s){if(e.isPropertyAccessExpression(t.ast)||e.isElementAccessExpression(t.ast)||e.isCallExpression(t.ast)){let o=i.getDefinitionAtPosition(p.fileName,t.start);for(let i of o??[]){if(i.fileName!==p.fileName)continue;let o=E(i.textSpan.start);if(!o)continue;let s=r.length;if(o.binding)for(let n of o.binding.accessTypes)e.isPropertyAccessExpression(t.ast)?(n===0&&t.ast.name.text===`value`&&(r.push(o.binding),a||=o.isDependency),n===1&&t.ast.name.text!==``&&(r.push(o.binding),a||=o.isDependency)):e.isElementAccessExpression(t.ast)?n===1&&(r.push(o.binding),a||=o.isDependency):e.isCallExpression(t.ast)&&n===2&&(r.push(o.binding),a||=o.isDependency);let c=r.length>s;if(c){o.callback&&r.push(o.callback);let e=C(o,n);r.push(...e),a||=e.length>0}}}}else if(!c&&e.isIdentifier(t.ast)){let e=i.getDefinitionAtPosition(p.fileName,t.start);for(let t of e??[]){if(t.fileName!==p.fileName)continue;let e=E(t.textSpan.start);if(!e)continue;e.binding&&(r.push(e.binding),a||=e.isDependency),e.callback&&r.push(e.callback);let i=C(e,n);r.push(...i),a||=i.length>0}}t.ast.forEachChild(n=>{let r=f(n.getStart(p),n.end);r&&o({...r,ast:n},s,e.isPropertyAccessExpression(t.ast)||e.isElementAccessExpression(t.ast))})}}function w(t,r,i=new Set){return(0,n.collectBindingRanges)(e,t,p).map(e=>{let t=f(e.start,e.end);return t?T(t.start,r,i):[]}).flat()}function T(e,t,n=new Set){if(n.has(e))return[];n.add(e);let r=i.findReferences(p.fileName,e);if(!r)return[];let a=[];for(let e of r)for(let r of e.references){if(r.fileName!==p.fileName)continue;let e=O(r.textSpan.start);if(e?.accessor){let i=!1;if(e.accessor.requiredAccess)for(let e of t)e===1?i||=g.has(r.textSpan.start+r.textSpan.length):e===0?i||=h.has(r.textSpan.start+r.textSpan.length):i||=_.has(r.textSpan.start+r.textSpan.length);if(i){let t=e.isDependent;if(e.binding){let r=w(e.binding.ast,e.binding.accessTypes,n);a.push(...r),t||=r.length>0}t&&a.push(e)}}}return a}function E(e){return m.find(t=>t.binding&&t.binding.start<=e&&t.binding.end>=e)}function D(e){return m.filter(t=>t.callback&&t.callback.start<=e&&t.callback.end>=e).sort((e,t)=>e.callback.end-e.callback.start-(t.callback.end-t.callback.start))[0]}function O(e){return m.filter(t=>t.accessor&&t.accessor.start<=e&&t.accessor.end>=e).sort((e,t)=>e.accessor.end-e.accessor.start-(t.accessor.end-t.accessor.start))[0]}}function a(e,t,r){let i=[],a=new Set,o=new Set,s=new Set;return t.forEachChild(function a(o){if(e.isVariableDeclaration(o)){if(o.initializer&&e.isCallExpression(o.initializer)){let n=o.initializer;if(e.isIdentifier(n.expression)){let e=n.expression.escapedText;if(e===`ref`||e===`shallowRef`||e===`toRef`||e===`useTemplateRef`||e===`defineModel`){let e=r(o.name.getStart(t),o.name.end);e&&i.push({isDependency:!0,isDependent:!1,binding:{...e,ast:o.name,accessTypes:[0]}})}else if(e===`reactive`||e===`shallowReactive`||e===`defineProps`||e===`withDefaults`){let e=r(o.name.getStart(t),o.name.end);e&&i.push({isDependency:!0,isDependent:!1,binding:{...e,ast:o.name,accessTypes:[1]}})}}}}else if(e.isFunctionDeclaration(o)){if(o.name&&o.body){let e=r(o.name.getStart(t),o.name.end),n=r(o.body.getStart(t),o.body.end);e&&n&&i.push({isDependency:!1,isDependent:!1,binding:{...e,ast:o.name,accessTypes:[2]},accessor:{...n,ast:o.body,requiredAccess:!0},callback:{...n,ast:o.body}})}}else if(e.isVariableStatement(o))for(let n of o.declarationList.declarations){let a=n.name,o=n.initializer;if(o&&e.isIdentifier(a)&&(e.isArrowFunction(o)||e.isFunctionExpression(o))){let e=r(a.getStart(t),a.end),n=r(o.getStart(t),o.end);e&&n&&i.push({isDependency:!1,isDependent:!1,binding:{...e,ast:a,accessTypes:[2]},accessor:{...n,ast:o,requiredAccess:!0},callback:{...n,ast:o}})}}else if(e.isParameter(o)){if(o.type&&e.isTypeReferenceNode(o.type)){let e=o.type.typeName.getText(t);if(e.endsWith(`Ref`)){let e=r(o.name.getStart(t),o.name.end);e&&i.push({isDependency:!0,isDependent:!1,binding:{...e,ast:o.name,accessTypes:[0]}})}}}else if(e.isCallExpression(o)&&e.isIdentifier(o.expression)){let a=o,s=o.expression.escapedText;if((s===`effect`||s===`watchEffect`)&&a.arguments.length){let n=a.arguments[0];if(e.isArrowFunction(n)||e.isFunctionExpression(n)){let e=r(n.getStart(t),n.end);e&&i.push({isDependency:!1,isDependent:!0,accessor:{...e,ast:n.body,requiredAccess:!0},callback:{...e,ast:n.body}})}}if(s===`watch`&&a.arguments.length>=2){let n=a.arguments[0],o=a.arguments[1];if(e.isArrowFunction(o)||e.isFunctionExpression(o)){let a=r(n.getStart(t),n.end),s=r(o.getStart(t),o.end);a&&s&&(e.isArrowFunction(n)||e.isFunctionExpression(n)?i.push({isDependency:!1,isDependent:!0,accessor:{...a,ast:n.body,requiredAccess:!0},callback:{...s,ast:o.body}}):i.push({isDependency:!1,isDependent:!0,accessor:{...a,ast:n,requiredAccess:!1},callback:{...s,ast:o.body}}))}}else if((0,n.hyphenateAttr)(s).startsWith(`use-`)){let n;if(e.isVariableDeclaration(a.parent)){let e=r(a.parent.name.getStart(t),a.parent.name.end);e&&(n={...e,ast:a.parent.name,accessTypes:[1,2]})}let o=r(a.getStart(t),a.end);o&&i.push({isDependency:!0,isDependent:!1,binding:n,accessor:{...o,ast:a,requiredAccess:!1}})}else if((s===`computed`||(0,n.hyphenateAttr)(s).endsWith(`-computed`))&&a.arguments.length){let n=a.arguments[0];if(e.isArrowFunction(n)||e.isFunctionExpression(n)){let o;if(e.isVariableDeclaration(a.parent)){let e=r(a.parent.name.getStart(t),a.parent.name.end);e&&(o={...e,ast:a.parent.name,accessTypes:[0]})}let s=r(n.getStart(t),n.end);s&&i.push({isDependency:!0,isDependent:!0,binding:o,accessor:{...s,ast:n.body,requiredAccess:!0},callback:{...s,ast:n.body}})}else if(e.isIdentifier(n)){let o;if(e.isVariableDeclaration(a.parent)){let e=r(a.parent.name.getStart(t),a.parent.name.end);e&&(o={...e,ast:a.parent.name,accessTypes:[0]})}let s=r(n.getStart(t),n.end);s&&i.push({isDependency:!0,isDependent:!1,binding:o,accessor:{...s,ast:n,requiredAccess:!1}})}else if(e.isObjectLiteralExpression(n)){for(let o of n.properties)if(o.name?.getText(t)===`get`){let n;if(e.isVariableDeclaration(a.parent)){let e=r(a.parent.name.getStart(t),a.parent.name.end);e&&(n={...e,ast:a.parent.name,accessTypes:[0]})}if(e.isPropertyAssignment(o)){let a=o.initializer;if(e.isArrowFunction(a)||e.isFunctionExpression(a)){let e=r(a.getStart(t),a.end);e&&i.push({isDependency:!0,isDependent:!0,binding:n,accessor:{...e,ast:a.body,requiredAccess:!0},callback:{...e,ast:a.body}})}}else if(e.isMethodDeclaration(o)&&o.body){let e=r(o.body.getStart(t),o.body.end);e&&i.push({isDependency:!0,isDependent:!0,binding:n,accessor:{...e,ast:o.body,requiredAccess:!0},callback:{...e,ast:o.body}})}}}}}o.forEachChild(a)}),t.forEachChild(function t(n){if(e.isPropertyAccessExpression(n)){let e=r(n.expression.end,n.expression.end);e&&(n.name.text===`value`?(a.add(e.end),o.add(e.end)):n.name.text!==``&&o.add(e.end))}else if(e.isElementAccessExpression(n)){let e=r(n.expression.end,n.expression.end);e&&o.add(e.end)}else if(e.isCallExpression(n)){let e=r(n.expression.end,n.expression.end);e&&s.add(e.end)}n.forEachChild(t)}),{signals:i,allValuePropertyAccess:a,allPropertyAccess:o,allFunctionCalls:s}}}),g=e.__commonJSMin(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.isRefAtPosition=r;let n=t.require_language_core();function r(e,t,r,i,a,o,s=0){let c=i.generated.languagePlugin.typescript?.getServiceScript(a);if(!c)return!1;let l=!1;for(let[e,r]of t.maps.forEach(c.code)){for(let[e,t]of r.toGeneratedLocation(o))if((0,n.isCompletionEnabled)(t.data)){o=e,l=!0;break}if(l)break}if(!l)return!1;let u=r.getSourceFile(a.fileName);if(!u)return!1;let d=h(u,u,o+s);if(!d)return!1;let f=r.getTypeChecker(),p=f.getTypeAtLocation(d),m=p.getProperties();return m.some(t=>t.escapedName===`value`&&t.flags&e.SymbolFlags.Accessor);function h(t,n,r){let i;return n.forEachChild(n=>{i||(n.end===r&&e.isIdentifier(n)?i=n:n.end>=r&&n.getStart(t)<r&&(i=h(t,n,r)))}),i}}});const _=r(),v=t.require_language_core(),y=i(),b=a(),x=s(),S=c(),C=l(),w=u(),T=d(),E=f(),D=p(),O=m(),k=h(),A=g(),j=/\\/g,M=new WeakMap;module.exports=(0,_.createLanguageServicePlugin)((e,t)=>{let n=i(),r=v.createVueLanguagePlugin(e,t.languageServiceHost.getCompilationSettings(),n,e=>e);return v.writeGlobalTypes(n,e.sys.writeFile),a(),{languagePlugins:[r],setup:r=>{M.set(t.project,[r,t.languageServiceHost,t.languageService]),t.languageService=(0,y.createVueLanguageServiceProxy)(e,r,t.languageService,n,e=>e);let i=setInterval(()=>{t.project.program&&(clearInterval(i),t.project.program.__vue__={language:r})},50)}};function i(){if(t.project.projectKind===e.server.ProjectKind.Configured){let n=t.project.getProjectName();return v.createParsedCommandLine(e,e.sys,n.replace(j,`/`)).vueOptions}else return v.createParsedCommandLineByJson(e,e.sys,t.languageServiceHost.getCurrentDirectory(),{}).vueOptions}function a(){let n=t.project.projectService;if(n.logger.info(`Vue: called handler processing `+t.project.projectKind),!t.session){n.logger.info(`Vue: there is no session in info.`);return}let r=t.session;if(!r.addProtocolHandler){n.logger.info(`Vue: there is no addProtocolHandler method.`);return}let i=r.handlers;if(i.has(`_vue:projectInfo`))return;r.addProtocolHandler(`_vue:projectInfo`,e=>i.get(`projectInfo`)(e)),r.addProtocolHandler(`_vue:documentHighlights-full`,e=>i.get(`documentHighlights-full`)(e)),r.addProtocolHandler(`_vue:encodedSemanticClassifications-full`,e=>i.get(`encodedSemanticClassifications-full`)(e)),r.addProtocolHandler(`_vue:quickinfo`,e=>i.get(`quickinfo`)(e)),r.addProtocolHandler(`_vue:collectExtractProps`,t=>{let[n,r]=t.arguments,{language:i,languageService:s,sourceScript:c,virtualCode:l}=o(n);return a((0,b.collectExtractProps)(e,i,s.getProgram(),c,l,r,c.generated?c.snapshot.getLength():0))}),r.addProtocolHandler(`_vue:getImportPathForFile`,t=>{let[n,r,i]=t.arguments,{languageServiceHost:o,languageService:c}=s(n);return a((0,O.getImportPathForFile)(e,o,c.getProgram(),n,r,i))}),r.addProtocolHandler(`_vue:isRefAtPosition`,t=>{let[n,r]=t.arguments,{language:i,languageService:s,sourceScript:c,virtualCode:l}=o(n);return a((0,A.isRefAtPosition)(e,i,s.getProgram(),c,l,r,c.generated?c.snapshot.getLength():0))}),r.addProtocolHandler(`_vue:getComponentDirectives`,t=>{let[n]=t.arguments,{languageService:r}=s(n);return a((0,x.getComponentDirectives)(e,r.getProgram(),n))}),r.addProtocolHandler(`_vue:getComponentEvents`,t=>{let[n,r]=t.arguments,{languageService:i}=s(n);return a((0,S.getComponentEvents)(e,i.getProgram(),n,r))}),r.addProtocolHandler(`_vue:getComponentNames`,t=>{let[n]=t.arguments,{languageService:r}=s(n);return a((0,C.getComponentNames)(e,r.getProgram(),n))}),r.addProtocolHandler(`_vue:getComponentProps`,t=>{let[n,r]=t.arguments,{languageService:i}=s(n);return a((0,w.getComponentProps)(e,i.getProgram(),n,r))}),r.addProtocolHandler(`_vue:getComponentSlots`,t=>{let[n]=t.arguments,{languageService:r,virtualCode:i}=o(n);return a((0,T.getComponentSlots)(e,r.getProgram(),i))}),r.addProtocolHandler(`_vue:getElementAttrs`,t=>{let[n,r]=t.arguments,{languageService:i}=s(n);return a((0,E.getElementAttrs)(e,i.getProgram(),n,r))}),r.addProtocolHandler(`_vue:getElementNames`,t=>{let[n]=t.arguments,{languageService:r}=s(n);return a((0,D.getElementNames)(e,r.getProgram(),n))}),r.addProtocolHandler(`_vue:getReactiveReferences`,t=>{let[n,r]=t.arguments,{languageService:i,language:o}=s(n),c=o.scripts.get(n);return a((0,k.getReactiveReferences)(e,o,i,c,n,r,c?.generated?c.snapshot.getLength():0))}),n.logger.info(`Vue specific commands are successfully added.`);function a(e){return{response:e,responseRequired:!0}}function o(e){let t=s(e),n=t.language.scripts.get(e);if(!n)throw Error(`No source script found for file: `+e);let r=n.generated?.root;if(!(r instanceof v.VueVirtualCode))throw Error(`No virtual code found for file: `+e);return{...t,sourceScript:n,virtualCode:r}}function s(t){let{project:n}=r.getFileAndProject({file:t,projectFileName:void 0}),i=M.get(n);if(!i)throw Error(`No vue service for project: `+n.getProjectName());let[a,o,s]=i;return{typescript:e,languageService:s,languageServiceHost:o,language:a}}}});